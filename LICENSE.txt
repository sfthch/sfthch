The MIT License (MIT)

Copyright (c) 2019 Samarjeet

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

-----------
-- mysql --
-----------

-D , --database=name        사용할 데이터베이스.
-e , --execute=name         명령문을 실행하고 종료하십시오.
-f , --force                SQL 오류가 발생하더라도 계속하십시오.
-h , --host=name            호스트에 연결하십시오.
-p , --password[=name]      서버에 연결할 때 사용할 비밀번호입니다.
-P , --port=num             기본 설정 my.cnf, $ MYSQL_TCP_PORT, / etc / services, 내장 기본값 (3306)
-N , --skip-column-names    결과에 열 이름을 쓰지 마십시오. --column-names 참조하십시오.
-t , --table                테이블 형식으로 출력을 표시합니다.
     --tee=name             모든 것을 아웃 파일에 추가하십시오.
-u , --user=name            현재 사용자가 아닌 경우 로그인 할 사용자입니다.
-v , --verbose              더 쓰세요. (-v -v -v는 테이블 출력 형식을 제공합니다).

source    , \.              SQL 스크립트 파일을 실행하십시오. 파일 이름을 인수로 사용합니다.
status    , \s              서버에서 상태 정보를 가져옵니다.
system    , \!              시스템 쉘 명령을 실행하십시오. 유닉스 계열 시스템에서만 작동합니다.
tee       , \T              출력 파일 [to_outfile]을 설정하십시오. 주어진 아웃 파일에 모든 것을 추가하십시오.

---------------
-- mysqldump --
---------------

--no-data                                       DDL 정보만 dump 합니다.
--no-create [디비명] [테이블명]                 테이블구조를 제외한 데이터만 dump 합니다. 여러개의 테이블이 가능 합니다.

--host=host name, -h host name                  접속 하려는 서버의 host 정보를 입력 합니다. default값은 localhost 입니다.
--password[=password], -p[password]             접속 하려는 서버의 user의 패스워드를 입력 합니다.
--port=port num,-P port num                     접속 하려는 서버의 port를 지정 합니다.
--user=user name, -u user name                  접속 하려는 서버의 user명을 기술 합니다.

--no-data, -d                                   데이터를 입력하지 않습니다. create 구문을 전부 제외 합니다.
--where="1=1 and a = 'a'", -w'where condition'  데이터를 dump할 때 where구문에 맞는 데이터만 dump받고 싶은 경우에 사용합니다.
--add-drop-table                                Create table 구문 전에 drop table 구문을 추가 합니다.
--create-options                                Create table 구문 안에 모든 테이블 옵션을 추가 합니다.
--no-create-info, -t                            Create table 구문을 작성하지 않습니다.
--replace                                       insert 구문 대신에 replace 구문을 사용하여 insert하게 설정합니다.

--flush-privileges                              mysql database를 dump한 후 dump파일에 FLUSH PRIVILEGES구문이 추가 됩니다.
--no-autocommit                                 각각의 dump되는 table의 앞 뒤에 SET autocommit=0 과 COMMIT 구문을 넣어 작성 합니다.

--complete-insert, -c                           INSERT 구문 작성시 컬럼 이름을 전부 포함하여 작성하도록 합니다.
--quote-names, -O                               식별자를 "'"를 사용하여 모두 감쌉니다. 만약, ANSI_QUOTES SQL MODE인 경우네는 """를 사용하여 감쌉니다. enable 이 기본 입니다.

--default-character-set=charset name            기본 character set으로 charset_name을 사용하도록 설정합니다. default는 utf8로 사용 됩니다.
--force, -f                                     에러가 발생해도 계속 작업이 진행되게 합니다.
--dump-date                                     dump 파일의 생성 일자를 comment로 추가합니다.
--insert-ignore                                 INSERT 문 대신 INSERT IGNORE 문을 작성하세요.

/usr/local/mysql/bin/mysqldump -h cfota-stg-cluster.cxnwrb9gjdfm.ap-northeast-1.rds.amazonaws.com \
                               -P 5506 -ufota_sys -p'ifotastg#123' fotadbbr01 tcdm_mgt_blck_case_wrk \
                               --where="crt_dt >= '20200609050943' and crt_dt < '20230529070246'" \
                               | sed 's/tcdm_mgt_blck_case_wrk/z8_tcdm_mgt_blck_case_wrk_230614/g' \
                               > z8_tcdm_mgt_blck_case_wrk_230614.dmp

/usr/local/mysql/bin/mysql -h cfota-stg-msk-test-cluster.cluster-cxnwrb9gjdfm.ap-northeast-1.rds.amazonaws.com \
                           -P 5506 -ufota_sys -p'ifotastg#123' fotadbbr01 --force < z8_tcdm_mgt_blck_case_wrk_230614.dmp

----------------
-- mysqladmin --
----------------

- 5초마다 한번씩 보여주기       : -i 옵션을 이용하면 몇초마다 한번씩 정기적으로 processlist 를 보여준다.
- 변경된 사항 차이점만 보여주기 : -r 옵션은 정보를 갱신항를 경우 차이점만 보여준다.

/usr/local/mysql/bin/mysqladmin -h cfota-stg-cluster.cxnwrb9gjdfm.ap-northeast-1.rds.amazonaws.com -P 5506 -ufota_sys -pifotastg#123 -i10 -r processlist

mysqladmin --defaults-extra-file=mylogin_masdr.cnf processlist status extended-status --sleep=10 --count=100 --relative
mysqladmin --defaults-extra-file=mylogin_masdr.cnf processlist --sleep=10 --count=100 --relative
mysqladmin --defaults-extra-file=mylogin_masdr.cnf processlist --sleep=10 --count=3 --relative
mysqladmin --defaults-extra-file=mylogin_masdr.cnf -i5 -c3 -r processlist
mysqladmin --defaults-extra-file=mylogin_masdr.cnf -i10 proc stat
mysqladmin --defaults-extra-file=mylogin_masdr.cnf status

mysqlshow --defaults-extra-file=mylogin_masdr.cnf maas tbmsm001 -k
